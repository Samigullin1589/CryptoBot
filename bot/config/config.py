# =================================================================================
# Файл: bot/config/config.py (НОВЫЙ ФАЙЛ)
# Описание: Этот файл отвечает за создание единственного экземпляра (singleton)
#           класса настроек. Все остальные модули в приложении должны
#           импортировать объект `settings` именно отсюда. Это разрывает
#           циклические зависимости.
# =================================================================================

import logging
from .settings import Settings, ValidationError

logger = logging.getLogger(__name__)

try:
    # Создаем единственный экземпляр настроек для всего приложения
    settings = Settings()
    logger.info("Конфигурация успешно загружена и валидирована.")
except ValidationError as e:
    # Если переменные окружения отсутствуют или некорректны, бот не сможет запуститься.
    # Это правильное поведение для production-среды.
    logger.critical(f"КРИТИЧЕСКАЯ ОШИБКА ВАЛИДАЦИИ НАСТРОЕК. Проверьте ваш .env файл и переменные окружения.\n{e}")
    # Вызываем SystemExit, чтобы предотвратить запуск бота с невалидной конфигурацией.
    raise SystemExit("Ошибки валидации конфигурации.")