# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é CryptoBot –Ω–∞ Render

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. ‚úÖ –ê–∫–∫–∞—É–Ω—Ç –Ω–∞ [Render.com](https://render.com)
2. ‚úÖ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π GitHub —Å –≤–∞—à–∏–º –±–æ—Ç–æ–º
3. ‚úÖ Telegram Bot Token (–æ—Ç @BotFather)
4. ‚úÖ Anthropic API Key (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ AI —Ñ—É–Ω–∫—Ü–∏–∏)

---

## üîß –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

### 1.1 –î–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª—ã –≤ –≤–∞—à GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–∏ —Ñ–∞–π–ª—ã –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞:
# - render.yaml
# - runtime.txt
```

### 1.2 –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.gitignore` –µ—Å—Ç—å:

```
.env
*.pyc
__pycache__/
*.db
*.log
data/*.db
```

### 1.3 –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏ –∑–∞–ø—É—à—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```bash
git add render.yaml runtime.txt
git commit -m "Add Render deployment config"
git push origin main
```

---

## üåê –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ Render

### 2.1 –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [dashboard.render.com](https://dashboard.render.com)
2. –ù–∞–∂–º–∏—Ç–µ **"New +"** ‚Üí **"Blueprint"**
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à GitHub –∞–∫–∫–∞—É–Ω—Ç (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω)
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π **CryptoBot**
5. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç `render.yaml`

### 2.2 Render —Å–æ–∑–¥–∞—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

- ‚úÖ Web Service (–≤–∞—à –±–æ—Ç)
- ‚úÖ Redis Instance (–¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è)

---

## üîê –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Web Service ‚Üí Environment**:

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|---------|----------|
| `BOT_TOKEN` | `123456:ABC-DEF...` | –¢–æ–∫–µ–Ω –æ—Ç @BotFather |
| `ADMIN_IDS` | `123456789,987654321` | ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é) |
| `ENVIRONMENT` | `production` | –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã |

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|---------|----------|
| `ANTHROPIC_API_KEY` | `sk-ant-...` | –î–ª—è AI —Ñ—É–Ω–∫—Ü–∏–π (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ) |
| `DATABASE_URL` | `postgresql://...` | –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ PostgreSQL |
| `LOG_LEVEL` | `INFO` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è |
| `WEBHOOK_MODE` | `false` | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ polling –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ |

### ‚ö†Ô∏è REDIS_URL –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç Redis —á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `REDIS_URL`.

---

## ‚öôÔ∏è –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### 4.1 –£–±–µ–¥–∏—Ç–µ—Å—å –≤ `bot/config/settings.py`:

```python
import os

class Settings:
    # Telegram
    BOT_TOKEN = os.getenv('BOT_TOKEN')
    ADMIN_IDS = [int(id) for id in os.getenv('ADMIN_IDS', '').split(',') if id]
    
    # Redis
    REDIS_URL = os.getenv('REDIS_URL', 'redis://localhost:6379')
    
    # AI
    ANTHROPIC_API_KEY = os.getenv('ANTHROPIC_API_KEY', '')
    
    # Environment
    ENVIRONMENT = os.getenv('ENVIRONMENT', 'development')
```

### 4.2 Health Check –≤ `bot/health_check_server.py`:

```python
from aiohttp import web

async def health(request):
    return web.Response(text='OK', status=200)

async def start_health_server():
    app = web.Application()
    app.router.add_get('/health', health)
    runner = web.AppRunner(app)
    await runner.setup()
    site = web.TCPSite(runner, '0.0.0.0', int(os.getenv('PORT', 10000)))
    await site.start()
```

---

## üöÄ –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 5.1 –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω–µ—Ç –±–∏–ª–¥ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Blueprint
2. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ **"Logs"**
3. –ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π –∑–∞–Ω–∏–º–∞–µ—Ç ~3-5 –º–∏–Ω—É—Ç

### 5.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

**–í Telegram:**
```
/start - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞
/help - –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
```

**–í Render Dashboard:**
- ‚úÖ –°—Ç–∞—Ç—É—Å: **"Live"** (–∑–µ–ª–µ–Ω—ã–π)
- ‚úÖ Health Check: **Passing**
- ‚úÖ Logs: –ù–µ—Ç –æ—à–∏–±–æ–∫

### 5.3 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤

```bash
# –í —Ä–∞–∑–¥–µ–ª–µ Logs –≤—ã —É–≤–∏–¥–∏—Ç–µ:
[INFO] Bot started successfully
[INFO] Connected to Redis
[INFO] Health server started on port 10000
```

---

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `BOT_TOKEN`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Redis connection error

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Redis —Å–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `REDIS_URL` (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π)
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å

### –ü—Ä–æ–±–ª–µ–º–∞ 3: Health check failing

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ health —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `PORT`
2. Endpoint –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `/health` –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 200 OK
3. –í `main.py` –¥–æ–±–∞–≤—å—Ç–µ:

```python
import asyncio
from bot.health_check_server import start_health_server

async def main():
    # –ó–∞–ø—É—Å–∫ health check —Å–µ—Ä–≤–µ—Ä–∞
    asyncio.create_task(start_health_server())
    
    # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
    await dp.start_polling(bot)
```

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

| –°–µ—Ä–≤–∏—Å | –ü–ª–∞–Ω | –¶–µ–Ω–∞ |
|--------|------|------|
| Web Service | Starter | **$7/–º–µ—Å—è—Ü** –∏–ª–∏ 750 —á–∞—Å–æ–≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ |
| Redis | Starter | **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** (25MB) |

**–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:** $0-7/–º–µ—Å—è—Ü –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω:
- 750 —á–∞—Å–æ–≤/–º–µ—Å—è—Ü (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è 1 —Å–µ—Ä–≤–∏—Å–∞ 24/7)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø—è—â–∏–π —Ä–µ–∂–∏–º –ø–æ—Å–ª–µ 15 –º–∏–Ω—É—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –ø–æ –ø–µ—Ä–≤–æ–º—É –∑–∞–ø—Ä–æ—Å—É (~30 —Å–µ–∫—É–Ω–¥)

---

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### –ü—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ GitHub:

1. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - ‚úÖ –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –±–∏–ª–¥
   - ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)
   - ‚úÖ –î–µ–ø–ª–æ–∏—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é
   - ‚úÖ –ë–µ–∑ –ø—Ä–æ—Å—Ç–æ—è (zero-downtime deployment)

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è:

Settings ‚Üí Build & Deploy ‚Üí Auto-Deploy: **Off**

---

## üìä –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 1. Webhook –≤–º–µ—Å—Ç–æ Polling (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è production –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webhook:

```python
# –í settings.py
WEBHOOK_MODE = os.getenv('WEBHOOK_MODE', 'false').lower() == 'true'
WEBHOOK_URL = os.getenv('WEBHOOK_URL', '')  # https://your-app.onrender.com

# –í main.py
if WEBHOOK_MODE:
    await bot.set_webhook(url=f"{WEBHOOK_URL}/webhook")
else:
    await dp.start_polling(bot)
```

### 2. PostgreSQL (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –ë–î)

–í Render Dashboard:
1. New ‚Üí PostgreSQL
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ External Database URL
3. –î–æ–±–∞–≤—å—Ç–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–∞–∫ `DATABASE_URL`

### 3. Scheduled Jobs (–∫—Ä–æ–Ω –∑–∞–¥–∞—á–∏)

–î–æ–±–∞–≤—å—Ç–µ –≤ `render.yaml`:

```yaml
  - type: cron
    name: cryptobot-daily-tasks
    runtime: python
    schedule: "0 0 * * *"  # –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ –ø–æ–ª–Ω–æ—á—å
    buildCommand: pip install -r requirements.txt
    startCommand: python -m bot.jobs.daily_cleanup
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:

1. ‚úÖ –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª—ã
2. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Render
3. ‚úÖ –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ Redis (ipAllowList)
4. ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS –¥–ª—è webhook
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ rate limiting
3. –î–æ–±–∞–≤—å—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (UptimeRobot)
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –≤ Render

---

## üì± –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- üìß Render Support: support@render.com
- üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://render.com/docs
- üí¨ Community: https://community.render.com

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

- [ ] `render.yaml` –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- [ ] `runtime.txt` —Å–æ–∑–¥–∞–Ω
- [ ] `.gitignore` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] `BOT_TOKEN` –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- [ ] `ADMIN_IDS` –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] Health check endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ö–æ–¥ –∑–∞–ø—É—à–µ–Ω –≤ GitHub
- [ ] Blueprint —Å–æ–∑–¥–∞–Ω –≤ Render
- [ ] –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- [ ] –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –≤ Telegram

---

**–ì–æ—Ç–æ–≤–æ! –í–∞—à –±–æ—Ç –∑–∞–ø—É—â–µ–Ω –Ω–∞ Render! üéâ**