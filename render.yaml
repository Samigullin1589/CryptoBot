services:
  # Сервис для нашего бота, работающий в нативной среде Python
  - type: worker
    name: cryptobot
    runtime: python
    plan: starter # Starter плана достаточно, так как мы не используем тяжелый браузер
    region: frankfurt # Рекомендуемый регион, близкий к Европе
    
    buildCommand: "pip install --upgrade pip && pip install -r requirements.txt"
    startCommand: "python -m bot.main"
    
    envVars:
      - key: PYTHON_VERSION
        value: 3.11
      - key: BOT_TOKEN
        fromSecret: true
      - key: REDIS_URL
        fromSecret: true
      - key: ADMIN_CHAT_ID
        fromSecret: true
      - key: NEWS_CHAT_ID
        fromSecret: true
      - key: CMC_API_KEY
        fromSecret: true
      - key: OPENAI_API_KEY
        fromSecret: true

  # Рекомендуется использовать внешний Redis (например, с upstash.com),
  # и указать его URL в секретах. Если вы хотите использовать Redis от Render,
  # раскомментируйте секцию ниже и измените fromSecret на fromService для REDIS_URL.
  # - type: redis
  #   name: cryptobot-redis
  #   plan: free